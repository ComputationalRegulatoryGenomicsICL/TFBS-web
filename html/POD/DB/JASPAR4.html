<head>
<!-- Generated by perlmod2www.pl -->
<title>
JASPAR4 documentation.
</title>
<link rel="stylesheet" type="text/css" href="../perl.css">
</head>
<body bgcolor="white">
<span id="modRootPath">TFBS::DB</span>
<span id="modName">JASPAR4</span>
<div id="sep"></div>
<a name="TOP" id="TOP"></a>
<table id="daArea" width="100%"><tr><td id="daEntry" ><a href="#SUMMARY">Summary</a></td><td id="daEntry" ><a href="#libs">Included libraries</a></td><td id="daEntry" ><a href="#vardefs">Package variables</a></td><td id="daEntry" ><a href="#SYNOPSIS">Synopsis</a></td><td id="daEntry" ><a href="#DESCRIPTION">Description</a></td><td id="daEntry" ><a href="#General">General documentation</a></td><td id="daEntry" ><a href="#Methods">Methods</a></td></tr></table>
<div id="sep"></div>
<div id="descTitle">Summary</div>
<div id="descArea"><B>TFBS::DB::JASPAR4</B> - interface to MySQL relational database of pattern matrices</div>
<div id="sep"></div>
<a name="vardefs" id="vardefs"></a><div id="descTitle">Package variables</div>
<div id="descArea"><div id="libEntry">No package variables defined.</div>
</div>
<div id="sep"></div>
<div id="descTitle">Included modules</div>
<div id="descArea"><div id="libEntry"><span id="use">Bio::Root::Root</span> </div>
<div id="libEntry"><span id="use">DBI</span></div>
<div id="libEntry"><span id="use"><a href="../Matrix/ICM.html">TFBS::Matrix::ICM</a></span> </div>
<div id="libEntry"><span id="use"><a href="../Matrix/PFM.html">TFBS::Matrix::PFM</a></span> </div>
<div id="libEntry"><span id="use"><a href="../Matrix/PWM.html">TFBS::Matrix::PWM</a></span> </div>
<div id="libEntry"><span id="use"><a href="../MatrixSet.html">TFBS::MatrixSet</a></span> </div>
</div>
<div id="sep"></div>
<a name="libs" id="libs"></a>
<div id="descTitle">Inherit</div>
<div id="descArea"><span id="isa">Bio::Root::Root</span> <span id="isa"><a href="../DB.html">TFBS::DB</a></span> </div>
<div id="sep"></div>
<a name="SYNOPSIS" id="SYNOPSIS"></a>
<div id="descTitle">Synopsis</div>
<div id="descArea"><div id="podItem">&nbsp;&nbsp;&nbsp;&nbsp;* creating a database object by connecting to the existing JASPAR2-type database</div>&nbsp;&nbsp;&nbsp;&nbsp;<div id="podItemEntry">    my $db = <B>TFBS::DB::JASPAR4</B>-&gt;connect(&quot;dbi:mysql:JASPAR4:myhost&quot;,<br />					&quot;myusername&quot;,<br />					&quot;mypassword&quot;);<br /></div><br /><div id="podItem">&nbsp;&nbsp;&nbsp;&nbsp;* retrieving a TFBS::Matrix::* object from the database</div>&nbsp;&nbsp;&nbsp;&nbsp;<div id="podItemEntry">    # retrieving a PFM by ID<br />    my $pfm = $db-&gt;get_Matrix_by_ID('M0079','PFM');<br /> <br />    #retrieving a PWM by name<br />    my $pwm = $db-&gt;get_Matrix_by_name('NF-kappaB', 'PWM');<br /></div><br /><div id="podItem">&nbsp;&nbsp;&nbsp;&nbsp;* retrieving a set of matrices as a TFBS::MatrixSet object according to various criteria</div><div id="podItem">&nbsp;&nbsp;&nbsp;&nbsp;* creating a new JASPAR4-type database named MYJASPAR4:</div><div id="podItem">&nbsp;&nbsp;&nbsp;&nbsp;* storing a matrix in the database (currently only PFMs):</div>&nbsp;&nbsp;&nbsp;&nbsp;<div id="podItemEntry">    #let $pfm is a TFBS::Matrix::PFM object<br />    $db-&gt;store_Matrix($pfm);<br /></div><br />
</div>
<div id="sep"></div>
<a name="DESCRIPTION" id="DESCRIPTION"></a>
<div id="descTitle">Description</div>
<div id="descArea"><B>TFBS::DB::JASPAR4</B> is a read/write database interface module that<br />retrieves and stores TFBS::Matrix::* and TFBS::MatrixSet<br />objects in a relational database. The interface is nearly identical<br />to the JASPAR2interface, while the underlying data model is different
</div>
<div id="sep"></div>
<a name="Methods" id="Methods"></a>
<div id="descTitle">Methods</div>
<table id="methIndArea" width="100%" cellspacing="0"><tr><td id="methIndEntry">DESTROY</td><td id="methIndEntry"><div id="error">No description</div></td><td id="methIndEntry"><a href="#CODE1">Code</a></td></tr>
<tr><td id="methIndEntry">_create_tables</td><td id="methIndEntry"><div id="error">No description</div></td><td id="methIndEntry"><a href="#CODE2">Code</a></td></tr>
<tr><td id="methIndEntry">_get_IDlist_by_query</td><td id="methIndEntry"><div id="error">No description</div></td><td id="methIndEntry"><a href="#CODE3">Code</a></td></tr>
<tr><td id="methIndEntry">_get_matrixstring</td><td id="methIndEntry"><div id="error">No description</div></td><td id="methIndEntry"><a href="#CODE4">Code</a></td></tr>
<tr><td id="methIndEntry">_new</td><td id="methIndEntry"><div id="error">No description</div></td><td id="methIndEntry"><a href="#CODE5">Code</a></td></tr>
<tr><td id="methIndEntry">_store_matrix_annotation</td><td id="methIndEntry"><div id="error">No description</div></td><td id="methIndEntry"><a href="#CODE6">Code</a></td></tr>
<tr><td id="methIndEntry">_store_matrix_data</td><td id="methIndEntry"><div id="error">No description</div></td><td id="methIndEntry"><a href="#CODE7">Code</a></td></tr>
<tr><td id="methIndEntry">_store_matrix_info</td><td id="methIndEntry"><div id="error">No description</div></td><td id="methIndEntry"><a href="#CODE8">Code</a></td></tr>
<tr><td id="methIndEntry">connect</td><td id="methIndEntry"><a href="#POD1">Description</a></td><td id="methIndEntry"><a href="#CODE9">Code</a></td></tr>
<tr><td id="methIndEntry">create</td><td id="methIndEntry"><div id="error">No description</div></td><td id="methIndEntry"><a href="#CODE10">Code</a></td></tr>
<tr><td id="methIndEntry">dbh</td><td id="methIndEntry"><a href="#POD2">Description</a></td><td id="methIndEntry"><a href="#CODE11">Code</a></td></tr>
<tr><td id="methIndEntry">delete_Matrix_having_ID</td><td id="methIndEntry"><a href="#POD3">Description</a></td><td id="methIndEntry"><a href="#CODE12">Code</a></td></tr>
<tr><td id="methIndEntry">get_MatrixSet</td><td id="methIndEntry"><a href="#POD4">Description</a></td><td id="methIndEntry"><a href="#CODE13">Code</a></td></tr>
<tr><td id="methIndEntry">get_Matrix_by_ID</td><td id="methIndEntry"><a href="#POD5">Description</a></td><td id="methIndEntry"><a href="#CODE14">Code</a></td></tr>
<tr><td id="methIndEntry">get_Matrix_by_name</td><td id="methIndEntry"><a href="#POD6">Description</a></td><td id="methIndEntry"><a href="#CODE15">Code</a></td></tr>
<tr><td id="methIndEntry">new</td><td id="methIndEntry"><a href="#POD7">Description</a></td><td id="methIndEntry"><a href="#CODE16">Code</a></td></tr>
<tr><td id="methIndEntry">store_Matrix</td><td id="methIndEntry"><a href="#POD8">Description</a></td><td id="methIndEntry"><a href="#CODE17">Code</a></td></tr>
<tr><td id="methIndEntry">store_MatrixSet</td><td id="methIndEntry"><div id="error">No description</div></td><td id="methIndEntry"><a href="#CODE18">Code</a></td></tr>
</table>
<div id="sep"></div>
<a name="MethDesc" id="MethDesc"></a>
<div id="mainTitle">Methods description</div>
<div id="sep"></div>
<table id="methDescTitle" width="100%"><tr><td WIDTH="200"><a name="_pod_connect" id="_pod_connect"></a><a name="POD1" id="POD1"></a>connect</td><td ><a href="#CODE9">code</a></td><td >&nbsp;&nbsp;&nbsp;&nbsp;</td><td ><a href="#POD2">next</a></td><td align="right"><a href="#TOP">Top</a></td></tr></table>
<table id="methDescArea" width="100%"><tr><td><pre id="podParagraph"> Title   : connect<br /> Usage   : my $db =<br />	    <B>TFBS::DB::JASPAR4</B>-&gt;connect(&quot;dbi:mysql:DATABASENAME:HOSTNAME&quot;,<br />					&quot;USERNAME&quot;,<br />					&quot;PASSWORD&quot;);<br /> Function: connects to the existing JASPAR4-type database and<br />	   returns a database object that interfaces the database<br /> Returns : a <B>TFBS::DB::JASPAR4</B> object<br /> Args    : a standard database connection triplet<br />	   (&quot;dbi:mysql:DATABASENAME:HOSTNAME&quot;,  &quot;USERNAME&quot;, &quot;PASSWORD&quot;)<br />	   In place of DATABASENAME, HOSTNAME, USERNAME and PASSWORD,<br />	   use the actual values. PASSWORD and USERNAME might be<br />	   optional, depending on the user's acces permissions for<br />	   the database server.</pre></td></tr></table>
<div id="sep"></div>
<table id="methDescTitle" width="100%"><tr><td WIDTH="200"><a name="_pod_dbh" id="_pod_dbh"></a><a name="POD2" id="POD2"></a>dbh</td><td ><a href="#CODE11">code</a></td><td ><a href="#POD1">prev</a></td><td ><a href="#POD3">next</a></td><td align="right"><a href="#TOP">Top</a></td></tr></table>
<table id="methDescArea" width="100%"><tr><td><pre id="podParagraph"> Title   : dbh<br /> Usage   : my $dbh = $db-&gt;dbh();<br />	   $dbh-&gt;do(&quot;UPDATE matrix_data SET name='ADD1' WHERE NAME='SREBP2'&quot;);<br /> Function: returns the DBI database handle of the MySQL database<br />	   interfaced by $db; THIS IS USED FOR WRITING NEW METHODS<br />	   FOR DIRECT RELATIONAL DATABASE MANIPULATION - if you<br />	   have write access AND do not know what you are doing,<br />	   you can severely  corrupt the data<br />	   For documentation about database handle methods, see <a href="#_pod_DBI">DBI</a><br /> Returns : the database (DBI) handle of the MySQL JASPAR2-type<br />	   relational database associated with the TFBS::DB::JASPAR2<br />	   object<br /> Args    : none</pre></td></tr></table>
<div id="sep"></div>
<table id="methDescTitle" width="100%"><tr><td WIDTH="200"><a name="_pod_delete_Matrix_having_ID" id="_pod_delete_Matrix_having_ID"></a><a name="POD3" id="POD3"></a>delete_Matrix_having_ID</td><td ><a href="#CODE12">code</a></td><td ><a href="#POD2">prev</a></td><td ><a href="#POD4">next</a></td><td align="right"><a href="#TOP">Top</a></td></tr></table>
<table id="methDescArea" width="100%"><tr><td><pre id="podParagraph"> Title   : delete_Matrix_having_ID<br /> Usage   : $db-&gt;delete_Matrix_with_ID('M00045');<br /> Function: Deletes the matrix having the given ID from the database<br /> Returns : 0 on success; $@ contents on failure<br />	   (this is too C-like and may change in future versions)<br /> Args    : (ID)<br />	   A string<br /> Comment : Yeah, yeah, 'delete_Matrix_having_ID' is a stupid name<br />	   for a method, but at least it should be obviuos what it does.</pre></td></tr></table>
<div id="sep"></div>
<table id="methDescTitle" width="100%"><tr><td WIDTH="200"><a name="_pod_get_MatrixSet" id="_pod_get_MatrixSet"></a><a name="POD4" id="POD4"></a>get_MatrixSet</td><td ><a href="#CODE13">code</a></td><td ><a href="#POD3">prev</a></td><td ><a href="#POD5">next</a></td><td align="right"><a href="#TOP">Top</a></td></tr></table>
<table id="methDescArea" width="100%"><tr><td><pre id="podParagraph"> Title   : get_MatrixSet<br /> Usage   : my $matrixset = $db-&gt;get_MatrixSet(%args);<br /> Function: fetches matrix data under for all matrices in the database<br />	   matching criteria defined by the named arguments<br />	   and returns a TFBS::MatrixSet object<br /> Returns : a TFBS::MatrixSet object<br /> Args    : This method accepts named arguments, corresponding to arbitrary tags.<br />           Note that this is different from JASPAR2. As any tag is supported for<br />           database storage, any tag can be used for information retrieval.<br />           Additionally, arguments as 'name' and 'class' can be used (even though<br />           they are not tags.<br />           As with get_Matrix methods, it is important to realize taht any matrix<br />           format can be stored in the database: the TFBS::MatrixSet might therefore<br />           consist of PFMs, ICMs and PWMS, depending on how matrices are stored,<br />           <br />           Examples include<br />	   -ID        # a reference to an array of IDs (strings)<br />	   -name      # a reference to an array of<br />		       #  transcription factor names (string)<br />	   -class    # a reference to an array of<br />		       #  structural class names (strings)<br />	   -species    # a reference to an array of<br />		       #   Latin species names (strings)<br />	   -sysgroup  # a reference to an array of<br />		       #  higher taxonomic categories (strings)<br />
	  
	   -min_ic     # float, minimum total information content
		       #   of the matrix. IMPORTANT:if retrieved matrices are in PWM
		       format there is no way to measureinformation content.
	-matrixtype    #string describing type of matrix to retrieve. If left out, the format
                        will revert to the database format. Note that this option only works
                      if the database format is pfm
</pre>The arguments that expect list references are used in database<br />query formulation: elements within lists are combined with 'OR'<br />operators, and the lists of different types with 'AND'. For example,<br /><pre id="podParagraph">    my $matrixset = $db-&gt;(-class =&gt; ['TRP_CLUSTER', 'FORKHEAD'],<br />			  -species =&gt; ['Homo sapiens', 'Mus musculus'],<br />			  );<br /></pre>gives a set of TFBS::Matrix::PFM objects (given that the matrix models are stored as such)<br /> whose (structural clas is 'TRP_CLUSTER' OR'FORKHEAD') AND (the species they are derived<br /> from is 'Homo sapiens'OR 'Mus musculus').<br />The -min_ic filter is applied after the query in the sense that the<br />matrices profiles with total infromation content less than specified<br />are not included in the set.</td></tr></table>
<div id="sep"></div>
<table id="methDescTitle" width="100%"><tr><td WIDTH="200"><a name="_pod_get_Matrix_by_ID" id="_pod_get_Matrix_by_ID"></a><a name="POD5" id="POD5"></a>get_Matrix_by_ID</td><td ><a href="#CODE14">code</a></td><td ><a href="#POD4">prev</a></td><td ><a href="#POD6">next</a></td><td align="right"><a href="#TOP">Top</a></td></tr></table>
<table id="methDescArea" width="100%"><tr><td><pre id="podParagraph"> Title   : get_Matrix_by_ID<br /> Usage   : my $pfm = $db-&gt;get_Matrix_by_ID('M00034', 'PFM');<br /> Function: fetches matrix data under the given ID from the<br />           database and returns a TFBS::Matrix::* object<br /> Returns : a TFBS::Matrix::* object; the exact type of the<br />	   object depending on what form the matrix is stored<br />	   in the database (PFM is default)<br /> Args    : (Matrix_ID)<br />	   Matrix_ID is a string;</pre></td></tr></table>
<div id="sep"></div>
<table id="methDescTitle" width="100%"><tr><td WIDTH="200"><a name="_pod_get_Matrix_by_name" id="_pod_get_Matrix_by_name"></a><a name="POD6" id="POD6"></a>get_Matrix_by_name</td><td ><a href="#CODE15">code</a></td><td ><a href="#POD5">prev</a></td><td ><a href="#POD7">next</a></td><td align="right"><a href="#TOP">Top</a></td></tr></table>
<table id="methDescArea" width="100%"><tr><td><pre id="podParagraph"> Title   : get_Matrix_by_name<br /> Usage   : my $pfm = $db-&gt;get_Matrix_by_name('HNF-1');<br /> Function: fetches matrix data under the given name from the<br />	   database and returns a TFBS::Matrix::* object<br /> Returns : a TFBS::Matrix::* object; the exact type of the object<br />	   depending on what form the matrix object was stored in<br />	   the database (default PFM))<br /> Args    : (Matrix_name)<br />	   <br /> Warning : According to the current JASPAR4 data model, name is<br />	   not necessarily a unique identifier. In the case where<br />	   there are several matrices with the same name in the<br />	   database, the function fetches the first one and prints<br />	   a warning on STDERR. You've been warned.</pre></td></tr></table>
<div id="sep"></div>
<table id="methDescTitle" width="100%"><tr><td WIDTH="200"><a name="_pod_new" id="_pod_new"></a><a name="POD7" id="POD7"></a>new</td><td ><a href="#CODE16">code</a></td><td ><a href="#POD6">prev</a></td><td ><a href="#POD8">next</a></td><td align="right"><a href="#TOP">Top</a></td></tr></table>
<table id="methDescArea" width="100%"><tr><td><pre id="podParagraph"> Title   : new<br /> Usage   : DEPRECATED - for backward compatibility only<br />           Use connect() or create() instead</pre></td></tr></table>
<div id="sep"></div>
<table id="methDescTitle" width="100%"><tr><td WIDTH="200"><a name="_pod_store_Matrix" id="_pod_store_Matrix"></a><a name="POD8" id="POD8"></a>store_Matrix</td><td ><a href="#CODE17">code</a></td><td ><a href="#POD7">prev</a></td><td ><a href="#POD9">next</a></td><td align="right"><a href="#TOP">Top</a></td></tr></table>
<table id="methDescArea" width="100%"><tr><td><pre id="podParagraph"> Title   : store_Matrix<br /> Usage   : $db-&gt;store_Matrix($matrixobject);<br /> Function: Stores the contents of a TFBS::Matrix::DB object in the database<br /> Returns : 0 on success; $@ contents on failure<br />	   (this is too C-like and may change in future versions)<br /> Args    : (PFM_object)<br />	   A TFBS::Matrix::PFM, FBS::Matrix::PWM or FBS::Matrix::ICM object.<br />	   PFM object are recommended to use, as they are eaily converted to<br />	   other formats<br /> Comment : this is an experimental method that is not 100% bulletproof;<br />	   use at your own risk</pre></td></tr></table>
<div id="sep"></div>
<a name="MethCode" id="MethCode"></a>
<div id="mainTitle">Methods code</div>
<div id="sep"></div>
<table id="methCodeTitle" width="100%"><tr><td width="200"><a name="CODE1" id="CODE1"></a>DESTROY</td><td >description</td><td >prev</td><td ><a href="#CODE2">next</a></td><td align="right"><a href="#TOP">Top</a></td></tr></table>
<div id="methCodeArea"><td ><span id="sub">sub</span> <span id="subName">DESTROY</span>
{<pre>    <span id="var">$_</span><span id="braces">[</span>0<span id="braces">]</span>-&gt;<span id="method">dbh</span>-&gt;<span id="method">disconnect</span><span id="braces">(</span><span id="braces">)</span> <span id="perlKey">if</span> <span id="var">$_</span><span id="braces">[</span>0<span id="braces">]</span>-&gt;<span id="method">dbh</span>;</pre>}</td></div>
<div id="sep"></div>
<table id="methCodeTitle" width="100%"><tr><td width="200"><a name="CODE2" id="CODE2"></a>_create_tables</td><td >description</td><td ><a href="#CODE1">prev</a></td><td ><a href="#CODE3">next</a></td><td align="right"><a href="#TOP">Top</a></td></tr></table>
<div id="methCodeArea"><td ><span id="sub">sub</span> <span id="privSubName">_create_tables</span>
{<pre>    <span id="comment"># utility function</span><br />
    <span id="comment"># If you want to change the databse schema,</span><br />    <span id="comment"># this is the right place to do it</span><br />
    <span id="perlKey">my</span> <span id="var">$dbh</span> = <span id="perlFunc">shift</span>;

    <span id="perlKey">my</span> <span id="var">@queries</span> = 
	<span id="braces">(</span>
       <span id="perlFunc">q</span><span id="sqStr">!!<br />        CREATE TABLE MATRIX_DATA(<br />	ID VARCHAR (16) DEFAULT '' NOT NULL,<br />	row VARCHAR(1) NOT NULL, <br />	col TINYINT(3) UNSIGNED NOT NULL, <br />	val FLOAT, <br />	PRIMARY KEY (ID, row, col)<br />	)<br />       !</span>,
       <span id="perlFunc">q</span><span id="sqStr">!!<br />       CREATE TABLE MATRIX_INFO( <br />	ID VARCHAR (16) DEFAULT '' NOT NULL PRIMARY KEY , <br /> 	type ENUM ('PFM', 'ICM','PWM') DEFAULT 'PFM' NOT NULL <br />	)<br />       !</span>,
       
       <span id="perlFunc">q</span><span id="sqStr">!!<br />        CREATE TABLE MATRIX_ANNOTATION(<br />        ID VARCHAR (16) DEFAULT '' NOT NULL,<br />	tag VARCHAR(255) DEFAULT '' NOT NULL,<br />	val TEXT,<br />	PRIMARY KEY (ID, tag)<br />	)<br />        !</span>,
        
    <span id="braces">)</span>;
    <span id="perlKey">foreach</span> <span id="perlKey">my</span> <span id="var">$query</span> <span id="braces">(</span><span id="var">@queries</span><span id="braces">)</span>  <span id="braces">{</span>
	<span id="var">$dbh</span>-&gt;<span id="perlKey">do</span><span id="braces">(</span><span id="var">$query</span><span id="braces">)</span> 
	    or <span id="perlFunc">die</span><span id="braces">(</span><span id="dqStr">"Error executing the query: $query\n"</span><span id="braces">)</span>;
    <span id="braces">}</span></pre>}</td></div>
<div id="sep"></div>
<table id="methCodeTitle" width="100%"><tr><td width="200"><a name="CODE3" id="CODE3"></a>_get_IDlist_by_query</td><td >description</td><td ><a href="#CODE2">prev</a></td><td ><a href="#CODE4">next</a></td><td align="right"><a href="#TOP">Top</a></td></tr></table>
<div id="methCodeArea"><td ><span id="sub">sub</span> <span id="privSubName">_get_IDlist_by_query</span>
{<pre>
    <span id="comment"># called by get_MatrixSet</span><br />    <span id="comment"># should be able to search for arbitrary tags...hmmm</span><br />    <span id="perlKey">my</span> <span id="braces">(</span><span id="var">$self</span>, <span id="var">%args</span><span id="braces">)</span> = <span id="var">@_</span>;
    <span id="perlKey">my</span> <span id="braces">(</span><span id="var">$TABLES</span>, <span id="var">%arrayref</span><span id="braces">)</span>;
    <span id="perlKey">my</span> <span id="braces">(</span><span id="var">%intersected_set</span><span id="braces">)</span>;
    

    <span id="perlKey">foreach</span> <span id="perlKey">my</span> <span id="var">$key</span><span id="braces">(</span><span id="perlFunc">keys</span> <span id="var">%args</span><span id="braces">)</span><span id="braces">{</span>
       
        <span id="perlKey">unless</span> <span id="braces">(</span> <span id="var">$key</span> <span id="perlKey">eq</span> <span id="dqStr">"-min_ic"</span> or <span id="var">$key</span> <span id="perlKey">eq</span>  <span id="dqStr">"-matrixtype"</span><span id="braces">)</span><span id="braces">{</span>
                <span id="perlKey">my</span> <span id="var">$oldkey</span>=<span id="var">$key</span>;
                <span id="var">$key</span>=~s<span id="regExp">/-/</span>/;<br />                <span id="var">$arrayref</span><span id="braces">{</span><span id="var">$key</span><span id="braces">}</span>= <span id="var">$args</span><span id="braces">{</span><span id="var">$oldkey</span><span id="braces">}</span>;
        <span id="braces">}</span>
    <span id="braces">}</span>
    <span id="perlKey">my</span> <span id="var">@andconditions</span>;
    
      
    <span id="var">$TABLES</span> = <span id="sqStr">'MATRIX_ANNOTATION '</span>;
    
    <span id="comment">#special case: get all matrices</span><br />    <span id="perlKey">unless</span> <span id="braces">(</span><span id="perlFunc">keys</span> <span id="var">%arrayref</span><span id="braces">)</span><span id="braces">{</span>
       
            
        
     <span id="perlKey">my</span> <span id="var">$query</span> = <span id="dqStr">"SELECT DISTINCT ID FROM <span id="var">$TABLES</span> "</span>;
        
     <span id="perlKey">my</span> <span id="var">$sth</span> = <span id="var">$self</span>-&gt;<span id="method">dbh</span>-&gt;<span id="method">prepare</span><span id="braces">(</span><span id="var">$query</span><span id="braces">)</span>;
     <span id="var">$sth</span>-&gt;<span id="method">execute</span><span id="braces">(</span><span id="braces">)</span> or <span id="var">$self</span>-&gt;<span id="method">throw</span><span id="braces">(</span><span id="dqStr">"Query failed:\n$query\n"</span><span id="braces">)</span>;
     <span id="perlKey">my</span> <span id="var">@ary</span>;
     
     <span id="perlKey">while</span> <span id="braces">(</span><span id="perlKey">my</span> <span id="braces">(</span><span id="var">$id</span><span id="braces">)</span> = <span id="var">$sth</span>-&gt;<span id="method">fetchrow_array</span><span id="braces">(</span><span id="braces">)</span><span id="braces">)</span>  <span id="braces">{</span>
           <span id="perlFunc">push</span> <span id="braces">(</span><span id="var">@ary</span>, <span id="var">$id</span><span id="braces">)</span>;
            
        <span id="braces">}</span>   
    
        <span id="perlKey">return</span><span id="braces">(</span><span id="var">@ary</span><span id="braces">)</span>;
    
    <span id="braces">}</span>
    
    
    
    
    
    <span id="perlKey">foreach</span> <span id="perlKey">my</span> <span id="var">$key</span> <span id="braces">(</span><span id="perlFunc">keys</span> <span id="var">%arrayref</span><span id="braces">)</span>  <span id="braces">{</span>
        <span id="comment">#print &quot;key: $key\n&quot;;</span><br />        <span id="perlKey">if</span> <span id="braces">(</span><span id="var">$key</span> <span id="perlKey">eq</span> <span id="sqStr">'ID'</span><span id="braces">)</span><span id="braces">{</span>
         <span id="perlFunc">push</span> <span id="var">@andconditions</span>,
	<span id="dqStr">"("</span>.
	<span id="perlFunc">join</span><span id="braces">(</span><span id="dqStr">" OR "</span>,
	     <span id="braces">(</span><span id="perlFunc">map</span> <span id="braces">{</span><span id="dqStr">"MATRIX_ANNOTATION.ID="</span>.
		       <span id="var">$self</span>-&gt;<span id="method">dbh</span>-&gt;<span id="method">quote</span><span id="braces">(</span><span id="var">$_</span><span id="braces">)</span>
		  <span id="braces">}</span> 
	      @<span id="braces">{</span><span id="var">$arrayref</span><span id="braces">{</span><span id="var">$key</span><span id="braces">}</span><span id="braces">}</span>
	     <span id="braces">)</span><span id="braces">)</span>.
	<span id="dqStr">")"</span>;   
            
            
            
        <span id="braces">}</span>
        <span id="perlKey">else</span><span id="braces">{</span>
        <span id="perlFunc">push</span> <span id="var">@andconditions</span>,
	<span id="dqStr">"("</span>.
	<span id="perlFunc">join</span><span id="braces">(</span><span id="dqStr">" OR "</span>,
	     <span id="braces">(</span><span id="perlFunc">map</span> <span id="braces">{</span><span id="dqStr">"MATRIX_ANNOTATION.tag="</span>. <span id="var">$self</span>-&gt;<span id="method">dbh</span>-&gt;<span id="method">quote</span><span id="braces">(</span><span id="var">$key</span><span id="braces">)</span>.<span id="dqStr">" AND val="</span>.
		       <span id="var">$self</span>-&gt;<span id="method">dbh</span>-&gt;<span id="method">quote</span><span id="braces">(</span><span id="var">$_</span><span id="braces">)</span>
		  <span id="braces">}</span> 
	      @<span id="braces">{</span><span id="var">$arrayref</span><span id="braces">{</span><span id="var">$key</span><span id="braces">}</span><span id="braces">}</span>
	     <span id="braces">)</span><span id="braces">)</span>.
	<span id="dqStr">")"</span>;
        <span id="braces">}</span>
        <span id="perlFunc">push</span> <span id="braces">(</span><span id="var">@andconditions</span>, 1<span id="braces">)</span> <span id="perlKey">unless</span><span id="braces">(</span><span id="var">@andconditions</span><span id="braces">)</span>;
        <span id="perlKey">my</span> <span id="var">$WHERE</span> = <span id="braces">(</span><span id="braces">(</span><span id="perlFunc">scalar</span> <span id="var">@andconditions</span><span id="braces">)</span> == 0<span id="braces">)</span> ? <span id="dqStr">""</span> : <span id="dqStr">" WHERE "</span>;

     
      
    <span id="perlKey">my</span> <span id="var">$query</span> = 
	    <span id="dqStr">"SELECT DISTINCT ID FROM <span id="var">$TABLES</span> <span id="var">$WHERE</span>"</span>.
	    <span id="perlFunc">join</span><span id="braces">(</span><span id="dqStr">" AND "</span>, <span id="var">@andconditions</span><span id="braces">)</span>;
   
       <span id="comment"># warn  $query; </span><br />        <span id="perlFunc">undef</span> <span id="var">@andconditions</span>;
        <span id="perlKey">my</span> <span id="var">$sth</span> = <span id="var">$self</span>-&gt;<span id="method">dbh</span>-&gt;<span id="method">prepare</span><span id="braces">(</span><span id="var">$query</span><span id="braces">)</span>;
        <span id="var">$sth</span>-&gt;<span id="method">execute</span><span id="braces">(</span><span id="braces">)</span> or <span id="var">$self</span>-&gt;<span id="method">throw</span><span id="braces">(</span><span id="dqStr">"Query failed:\n$query\n"</span><span id="braces">)</span>;
    
        <span id="comment"># collect IDs and return</span><br />
        <span id="perlKey">my</span> <span id="var">%current_query</span>;
        <span id="perlKey">while</span> <span id="braces">(</span><span id="perlKey">my</span> <span id="braces">(</span><span id="var">$id</span><span id="braces">)</span> = <span id="var">$sth</span>-&gt;<span id="method">fetchrow_array</span><span id="braces">(</span><span id="braces">)</span><span id="braces">)</span>  <span id="braces">{</span>
           <span id="var">$current_query</span><span id="braces">{</span><span id="var">$id</span><span id="braces">}</span>=1;
            
        <span id="braces">}</span>
        <span id="perlKey">unless</span> <span id="braces">(</span><span id="var">%intersected_set</span><span id="braces">)</span><span id="braces">{</span>
            <span id="var">%intersected_set</span>= <span id="var">%current_query</span>;
            <span id="perlKey">next</span>;
        <span id="braces">}</span>
        <span id="comment"># do intersect</span><br />        <span id="perlKey">foreach</span> <span id="perlKey">my</span> <span id="var">$key</span> <span id="braces">(</span><span id="perlFunc">keys</span> <span id="var">%intersected_set</span><span id="braces">)</span><span id="braces">{</span>
              <span id="perlFunc">delete</span> <span id="var">$intersected_set</span><span id="braces">{</span> <span id="var">$key</span><span id="braces">}</span>  <span id="perlKey">unless</span> <span id="var">$current_query</span><span id="braces">{</span><span id="var">$key</span><span id="braces">}</span>;
            
        <span id="braces">}</span>
    <span id="braces">}</span> 
    
    <span id="perlKey">my</span> <span id="var">@ary</span>;
    <span id="perlKey">foreach</span> <span id="perlKey">my</span> <span id="var">$key</span> <span id="braces">(</span><span id="perlFunc">keys</span> <span id="var">%intersected_set</span><span id="braces">)</span><span id="braces">{</span>
        <span id="perlFunc">push</span> <span id="braces">(</span><span id="var">@ary</span>, <span id="var">$key</span><span id="braces">)</span>;
       <span id="comment"># warn &quot;$key\n&quot;;</span><br />    <span id="braces">}</span>
    <span id="perlKey">return</span> <span id="braces">(</span><span id="var">@ary</span><span id="braces">)</span>;</pre>}</td></div>
<div id="sep"></div>
<table id="methCodeTitle" width="100%"><tr><td width="200"><a name="CODE4" id="CODE4"></a>_get_matrixstring</td><td >description</td><td ><a href="#CODE3">prev</a></td><td ><a href="#CODE5">next</a></td><td align="right"><a href="#TOP">Top</a></td></tr></table>
<div id="methCodeArea"><td ><span id="sub">sub</span> <span id="privSubName">_get_matrixstring</span>
{<pre>    <span id="perlKey">my</span> <span id="braces">(</span><span id="var">$self</span>, <span id="var">$ID</span><span id="braces">)</span> = <span id="var">@_</span>;
    <span id="comment">#my %dbname = (PWM =&gt; 'pwm', PFM =&gt; 'raw', ICM =&gt; 'info');</span><br />    <span id="comment">#unless (defined $dbname{$mt})  {</span><br />	<span id="comment">#$self-&gt;throw(&quot;Unsupported matrix type: &quot;.$mt);</span><br />    <span id="comment">#}</span><br />    <span id="perlKey">my</span> <span id="var">$sth</span>;
    <span id="perlKey">my</span> <span id="var">$qID</span> = <span id="var">$self</span>-&gt;<span id="method">dbh</span>-&gt;<span id="method">quote</span><span id="braces">(</span><span id="var">$ID</span><span id="braces">)</span>;
    <span id="perlKey">my</span> <span id="var">$matrixstring</span> = <span id="dqStr">""</span>;
    <span id="perlKey">foreach</span> <span id="perlKey">my</span> <span id="var">$base</span> <span id="braces">(</span><span id="perlFunc">qw</span><span id="braces">(</span>A C G T<span id="braces">)</span><span id="braces">)</span> <span id="braces">{</span>
	<span id="var">$sth</span>=<span id="var">$self</span>-&gt;<span id="method">dbh</span>-&gt;<span id="method">prepare</span>
	    <span id="braces">(</span><span id="dqStr">"SELECT val FROM MATRIX_DATA 
              WHERE ID=<span id="var">$qID</span> AND row='$base' ORDER BY col"</span><span id="braces">)</span>;
	<span id="var">$sth</span>-&gt;<span id="method">execute</span>;
	<span id="var">$matrixstring</span> .=
	    <span id="perlFunc">join</span> <span id="braces">(</span><span id="dqStr">" "</span>, <span id="braces">(</span><span id="perlFunc">map</span> <span id="braces">{</span><span id="var">$_</span>-&gt;<span id="braces">[</span>0<span id="braces">]</span><span id="braces">}</span> @<span id="braces">{</span><span id="var">$sth</span>-&gt;<span id="method">fetchall_arrayref</span><span id="braces">(</span><span id="braces">)</span><span id="braces">}</span><span id="braces">)</span><span id="braces">)</span>.<span id="dqStr">"\n"</span>;
    <span id="braces">}</span>
    <span id="var">$sth</span>-&gt;<span id="method">finish</span>;
    <span id="perlKey">return</span> <span id="perlFunc">undef</span> <span id="perlKey">if</span> <span id="var">$matrixstring</span> <span id="perlKey">eq</span> <span id="dqStr">"\n"</span>x4;

    <span id="perlKey">return</span> <span id="var">$matrixstring</span>;</pre>}</td></div>
<div id="sep"></div>
<table id="methCodeTitle" width="100%"><tr><td width="200"><a name="CODE5" id="CODE5"></a>_new</td><td >description</td><td ><a href="#CODE4">prev</a></td><td ><a href="#CODE6">next</a></td><td align="right"><a href="#TOP">Top</a></td></tr></table>
<div id="methCodeArea"><td ><span id="sub">sub</span> <span id="privSubName">_new</span>
{<pre>    <span id="perlKey">my</span> <span id="braces">(</span><span id="var">$caller</span>, <span id="var">%args</span><span id="braces">)</span>  = <span id="var">@_</span>;
    <span id="perlKey">my</span> <span id="var">$class</span> = <span id="perlFunc">ref</span> <span id="var">$caller</span> || <span id="var">$caller</span>;
    <span id="perlKey">my</span> <span id="var">$self</span> = <span id="perlFunc">bless</span> <span id="braces">{</span><span id="braces">}</span>, <span id="var">$class</span>;

    <span id="perlKey">my</span> <span id="braces">(</span><span id="var">$connectstring</span>, <span id="var">$user</span>, <span id="var">$password</span><span id="braces">)</span>;
 
    <span id="perlKey">if</span> <span id="braces">(</span><span id="var">$args</span><span id="braces">{</span><span id="sqStr">'-connect'</span><span id="braces">}</span> and <span id="braces">(</span><span id="perlFunc">ref</span><span id="braces">(</span><span id="var">$args</span><span id="braces">{</span><span id="sqStr">'-connect'</span><span id="braces">}</span><span id="braces">)</span> <span id="perlKey">eq</span> <span id="dqStr">"ARRAY"</span><span id="braces">)</span><span id="braces">)</span>  <span id="braces">{</span>
	<span id="braces">(</span><span id="var">$connectstring</span>, <span id="var">$user</span>, <span id="var">$password</span><span id="braces">)</span> = @<span id="braces">{</span><span id="var">$args</span><span id="braces">{</span><span id="sqStr">'-connect'</span><span id="braces">}</span><span id="braces">}</span>;
    <span id="braces">}</span>
    <span id="perlKey">elsif</span> <span id="braces">(</span><span id="var">$args</span><span id="braces">{</span><span id="sqStr">'-create'</span><span id="braces">}</span> and <span id="braces">(</span><span id="perlFunc">ref</span><span id="braces">(</span><span id="var">$args</span><span id="braces">{</span><span id="sqStr">'-create'</span><span id="braces">}</span><span id="braces">)</span> <span id="perlKey">eq</span> <span id="dqStr">"ARRAY"</span><span id="braces">)</span><span id="braces">)</span>  <span id="braces">{</span>
	<span id="perlKey">return</span> <span id="var">$caller</span>-&gt;<span id="method">create</span><span id="braces">(</span>@<span id="braces">{</span>-args<span id="braces">{</span><span id="sqStr">'create'</span><span id="braces">}</span><span id="braces">}</span><span id="braces">)</span>;
    <span id="braces">}</span>
    <span id="perlKey">else</span>  <span id="braces">{</span>
	<span id="braces">(</span><span id="var">$connectstring</span>, <span id="var">$user</span>, <span id="var">$password</span><span id="braces">)</span> = 
	    <span id="braces">(</span>DEFAULT_CONNECTSTRING, DEFAULT_USER, DEFAULT_PASSWORD<span id="braces">)</span>;
    <span id="braces">}</span>

    <span id="var">$self</span>-&gt;<span id="method">dbh</span><span id="braces">(</span> <span id="method">DBI</span><span id="method">->connect</span><span id="braces">(</span><span id="var">$connectstring</span>, <span id="var">$user</span>, <span id="var">$password</span><span id="braces">)</span> <span id="braces">)</span>;
    
    <span id="perlKey">return</span> <span id="var">$self</span>;</pre>}</td></div>
<div id="sep"></div>
<table id="methCodeTitle" width="100%"><tr><td width="200"><a name="CODE6" id="CODE6"></a>_store_matrix_annotation</td><td >description</td><td ><a href="#CODE5">prev</a></td><td ><a href="#CODE7">next</a></td><td align="right"><a href="#TOP">Top</a></td></tr></table>
<div id="methCodeArea"><td ><span id="sub">sub</span> <span id="privSubName">_store_matrix_annotation</span>
{<pre>    <span id="perlKey">my</span> <span id="braces">(</span><span id="var">$self</span>, <span id="var">$pfm</span>, <span id="var">$ACTION</span><span id="braces">)</span> = <span id="var">@_</span>;
    <span id="perlKey">my</span> <span id="var">$sth</span> = <span id="var">$self</span>-&gt;<span id="method">dbh</span>-&gt;<span id="method">prepare</span> 
	<span id="braces">(</span><span id="perlFunc">q</span><span id="sqStr">!! INSERT INTO MATRIX_ANNOTATION<br />	    (ID, tag, val) <br />	    VALUES(?,?,?) !</span><span id="braces">)</span>;
    
    <span id="var">$sth</span>-&gt;<span id="method">execute</span><span id="braces">(</span><span id="var">$pfm</span>-&gt;<span id="method">ID</span>,
                    <span id="sqStr">'name'</span>,
                    <span id="braces">(</span><span id="var">$pfm</span>-&gt;<span id="method">name</span><span id="braces">(</span><span id="braces">)</span> or <span id="dqStr">""</span><span id="braces">)</span>,
    <span id="braces">)</span>;
    <span id="var">$sth</span>-&gt;<span id="method">execute</span><span id="braces">(</span><span id="var">$pfm</span>-&gt;<span id="method">ID</span>,
                    <span id="sqStr">'class'</span>,
                    <span id="braces">(</span><span id="var">$pfm</span>-&gt;<span id="method">class</span><span id="braces">(</span><span id="braces">)</span> or <span id="dqStr">""</span><span id="braces">)</span>,
    <span id="braces">)</span>;
    
    <span id="comment"># get all tags	</span><br />	
    <span id="perlKey">my</span> <span id="var">%tags</span>= <span id="var">$pfm</span>-&gt;<span id="method">all_tags</span><span id="braces">(</span><span id="braces">)</span>;
    <span id="perlKey">foreach</span> <span id="perlKey">my</span> <span id="var">$tag</span><span id="braces">(</span> <span id="perlFunc">keys</span> <span id="var">%tags</span><span id="braces">)</span><span id="braces">{</span>
    <span id="var">$sth</span>-&gt;<span id="method">execute</span><span id="braces">(</span><span id="var">$pfm</span>-&gt;<span id="method">ID</span>,
                    <span id="var">$tag</span>, 
                   <span id="braces">(</span><span id="var">$tags</span><span id="braces">{</span><span id="var">$tag</span><span id="braces">}</span> or <span id="dqStr">""</span><span id="braces">)</span>,
                 <span id="braces">)</span>
    
	or <span id="var">$self</span>-&gt;<span id="method">throw</span><span id="braces">(</span><span id="dqStr">"Error executing query"</span><span id="braces">)</span>;
    <span id="braces">}</span>	
<span id="braces">}</span>







<span id="comment">#when creating: try to support arbitrary tags</span><br /></pre>}</td></div>
<div id="sep"></div>
<table id="methCodeTitle" width="100%"><tr><td width="200"><a name="CODE7" id="CODE7"></a>_store_matrix_data</td><td >description</td><td ><a href="#CODE6">prev</a></td><td ><a href="#CODE8">next</a></td><td align="right"><a href="#TOP">Top</a></td></tr></table>
<div id="methCodeArea"><td ><span id="sub">sub</span> <span id="privSubName">_store_matrix_data</span>
{<pre>    <span id="perlKey">my</span> <span id="braces">(</span><span id="var">$self</span>, <span id="var">$pfm</span>, <span id="var">$ACTION</span><span id="braces">)</span> = <span id="var">@_</span>;
    <span id="perlKey">my</span> <span id="var">@base</span> = <span id="perlFunc">qw</span><span id="braces">(</span>A C G T<span id="braces">)</span>;
    <span id="perlKey">my</span> <span id="var">$matrix</span> = <span id="var">$pfm</span>-&gt;<span id="method">matrix</span><span id="braces">(</span><span id="braces">)</span>;
    <span id="perlKey">my</span> <span id="var">$type</span>;
    <span id="perlKey">my</span> <span id="var">$sth</span> = <span id="var">$self</span>-&gt;<span id="method">dbh</span>-&gt;<span id="method">prepare</span> 
	<span id="braces">(</span><span id="perlFunc">q</span><span id="sqStr">!! INSERT INTO MATRIX_DATA VALUES(?,?,?,?) !</span><span id="braces">)</span>;
				 
    <span id="perlKey">for</span> <span id="perlKey">my</span> <span id="var">$i</span> <span id="braces">(</span>0..3<span id="braces">)</span>  <span id="braces">{</span>
	<span id="perlKey">for</span> <span id="perlKey">my</span> <span id="var">$j</span> <span id="braces">(</span>0..<span id="braces">(</span><span id="var">$pfm</span>-&gt;<span id="perlFunc">length</span>-1<span id="braces">)</span><span id="braces">)</span> <span id="braces">{</span>
	    <span id="var">$sth</span>-&gt;<span id="method">execute</span><span id="braces">(</span> <span id="var">$pfm</span>-&gt;<span id="method">ID</span>,
			   
			   <span id="var">$base</span><span id="braces">[</span><span id="var">$i</span><span id="braces">]</span>,
			   <span id="var">$j</span>+1,
			   <span id="var">$matrix</span>-&gt;<span id="braces">[</span><span id="var">$i</span><span id="braces">]</span><span id="braces">[</span><span id="var">$j</span><span id="braces">]</span>
	    <span id="braces">)</span>
	   or <span id="var">$self</span>-&gt;<span id="method">throw</span><span id="braces">(</span><span id="dqStr">"Error executing query."</span><span id="braces">)</span>;
	<span id="braces">}</span>
    <span id="braces">}</span></pre>}</td></div>
<div id="sep"></div>
<table id="methCodeTitle" width="100%"><tr><td width="200"><a name="CODE8" id="CODE8"></a>_store_matrix_info</td><td >description</td><td ><a href="#CODE7">prev</a></td><td ><a href="#CODE9">next</a></td><td align="right"><a href="#TOP">Top</a></td></tr></table>
<div id="methCodeArea"><td ><span id="sub">sub</span> <span id="privSubName">_store_matrix_info</span>
{<pre>
    <span id="perlKey">my</span> <span id="braces">(</span><span id="var">$self</span>, <span id="var">$pfm</span>, <span id="var">$ACTION</span><span id="braces">)</span> = <span id="var">@_</span>;

    <span id="perlKey">my</span> <span id="var">$type</span>;
    <span id="var">$type</span>= <span id="sqStr">'PFM'</span> <span id="perlKey">if</span> <span id="var">$pfm</span>-&gt;<span id="method">isa</span><span id="braces">(</span><span id="dqStr">"TFBS::Matrix::PFM"</span><span id="braces">)</span>;
    <span id="var">$type</span>= <span id="sqStr">'PWM'</span> <span id="perlKey">if</span> <span id="var">$pfm</span>-&gt;<span id="method">isa</span><span id="braces">(</span><span id="dqStr">"TFBS::Matrix::PWM"</span><span id="braces">)</span>;
    <span id="var">$type</span>= <span id="sqStr">'ICM'</span> <span id="perlKey">if</span> <span id="var">$pfm</span>-&gt;<span id="method">isa</span><span id="braces">(</span><span id="dqStr">"TFBS::Matrix::ICM"</span><span id="braces">)</span>;


    <span id="perlKey">my</span> <span id="var">$sth</span> = <span id="var">$self</span>-&gt;<span id="method">dbh</span>-&gt;<span id="method">prepare</span> 
	<span id="braces">(</span><span id="perlFunc">q</span><span id="sqStr">!! INSERT INTO MATRIX_INFO<br />	    (ID, type) <br />	    VALUES(?,?) !</span><span id="braces">)</span>;
    <span id="var">$sth</span>-&gt;<span id="method">execute</span><span id="braces">(</span><span id="var">$pfm</span>-&gt;<span id="method">ID</span>,
		  <span id="var">$type</span>, 
		  <span id="braces">)</span>
	or <span id="var">$self</span>-&gt;<span id="method">throw</span><span id="braces">(</span><span id="dqStr">"Error executing query"</span><span id="braces">)</span>;</pre>}</td></div>
<div id="sep"></div>
<table id="methCodeTitle" width="100%"><tr><td width="200"><a name="CODE9" id="CODE9"></a>connect</td><td ><a href="#POD1">description</a></td><td ><a href="#CODE8">prev</a></td><td ><a href="#CODE10">next</a></td><td align="right"><a href="#TOP">Top</a></td></tr></table>
<div id="methCodeArea"><td ><span id="sub">sub</span> <span id="subName">connect</span>
{<pre>    <span id="comment"># a more intuitive syntax for the constructor</span><br />    <span id="perlKey">my</span> <span id="braces">(</span><span id="var">$caller</span>, <span id="var">@connection_args</span><span id="braces">)</span> = <span id="var">@_</span>;
    <span id="var">$caller</span>-&gt;<span id="perlKey">new</span><span id="braces">(</span>-<span id="perlFunc">connect</span> =&gt;\@ connection_args<span id="braces">)</span>;</pre>}</td></div>
<div id="sep"></div>
<table id="methCodeTitle" width="100%"><tr><td width="200"><a name="CODE10" id="CODE10"></a>create</td><td >description</td><td ><a href="#CODE9">prev</a></td><td ><a href="#CODE11">next</a></td><td align="right"><a href="#TOP">Top</a></td></tr></table>
<div id="methCodeArea"><td ><span id="sub">sub</span> <span id="subName">create</span>
{<pre>    <span id="perlKey">my</span> <span id="braces">(</span><span id="var">$caller</span>, <span id="var">$connectstring</span>, <span id="var">$user</span>, <span id="var">$password</span><span id="braces">)</span> = <span id="var">@_</span>;
    <span id="perlKey">if</span> <span id="braces">(</span><span id="var">$connectstring</span> 
	and <span id="var">$connectstring</span> =~ <span id="regExp">/dbi:mysql:(\w+)(.*)/</span><span id="braces">)</span>  
    <span id="braces">{</span>
	<span id="comment"># connect to the server;</span><br />	<span id="perlKey">my</span> <span id="var">$dbh</span>=<span id="method">DBI</span><span id="method">->connect</span><span id="braces">(</span><span id="dqStr">"dbi:mysql:mysql"</span>.<span id="var">$2</span>,
			     <span id="var">$user</span>,<span id="var">$password</span><span id="braces">)</span>
	    or <span id="perlFunc">die</span><span id="braces">(</span><span id="dqStr">"Error connecting to the database"</span><span id="braces">)</span>; 

	<span id="comment"># create database and open it</span><br />	<span id="var">$dbh</span>-&gt;<span id="perlKey">do</span><span id="braces">(</span><span id="dqStr">"create database <span id="var">$1</span>"</span><span id="braces">)</span> 
	    or <span id="perlFunc">die</span><span id="braces">(</span><span id="dqStr">"Error creating database."</span><span id="braces">)</span>;
	<span id="var">$dbh</span>-&gt;<span id="perlKey">do</span><span id="braces">(</span><span id="dqStr">"use <span id="var">$1</span>"</span><span id="braces">)</span>; 
	
	<span id="comment"># create tables</span><br />	<span id="method">_create_tables</span><span id="braces">(</span><span id="var">$dbh</span><span id="braces">)</span>;

	<span id="var">$dbh</span>-&gt;<span id="method">disconnect</span>;

	<span id="comment"># run &quot;new&quot; with new database</span><br />
	<span id="perlKey">return</span> <span id="var">$caller</span>-&gt;<span id="perlKey">new</span><span id="braces">(</span>-<span id="perlFunc">connect</span>=&gt;<span id="braces">[</span><span id="var">$connectstring</span>, <span id="var">$user</span>, <span id="var">$password</span><span id="braces">]</span><span id="braces">)</span>;
    <span id="braces">}</span>
    <span id="perlKey">else</span>  <span id="braces">{</span>
	<span id="perlFunc">die</span><span id="braces">(</span><span id="dqStr">"Missing or malformed connect string for "</span>.
		     <span id="dqStr">"TFBS::DB::JASPAR2 connection."</span><span id="braces">)</span>; 
    <span id="braces">}</span></pre>}</td></div>
<div id="sep"></div>
<table id="methCodeTitle" width="100%"><tr><td width="200"><a name="CODE11" id="CODE11"></a>dbh</td><td ><a href="#POD2">description</a></td><td ><a href="#CODE10">prev</a></td><td ><a href="#CODE12">next</a></td><td align="right"><a href="#TOP">Top</a></td></tr></table>
<div id="methCodeArea"><td ><span id="sub">sub</span> <span id="subName">dbh</span>
{<pre>    <span id="perlKey">my</span> <span id="braces">(</span><span id="var">$self</span>, <span id="var">$dbh</span><span id="braces">)</span> = <span id="var">@_</span>;
    <span id="var">$self</span>-&gt;<span id="braces">{</span><span id="sqStr">'dbh'</span><span id="braces">}</span> = <span id="var">$dbh</span> <span id="perlKey">if</span> <span id="var">$dbh</span>;
    <span id="perlKey">return</span> <span id="var">$self</span>-&gt;<span id="braces">{</span><span id="sqStr">'dbh'</span><span id="braces">}</span>;</pre>}</td></div>
<div id="sep"></div>
<table id="methCodeTitle" width="100%"><tr><td width="200"><a name="CODE12" id="CODE12"></a>delete_Matrix_having_ID</td><td ><a href="#POD3">description</a></td><td ><a href="#CODE11">prev</a></td><td ><a href="#CODE13">next</a></td><td align="right"><a href="#TOP">Top</a></td></tr></table>
<div id="methCodeArea"><td ><span id="sub">sub</span> <span id="subName">delete_Matrix_having_ID</span>
{<pre>    <span id="perlKey">my</span> <span id="braces">(</span><span id="var">$self</span>, <span id="var">@IDs</span><span id="braces">)</span> = <span id="var">@_</span>;
    <span id="perlKey">eval</span>  <span id="braces">{</span>
	<span id="perlKey">foreach</span> <span id="perlKey">my</span> <span id="var">$ID</span> <span id="braces">(</span><span id="var">@IDs</span><span id="braces">)</span> <span id="braces">{</span>
	    <span id="perlKey">my</span> <span id="var">$q_ID</span> = <span id="var">$self</span>-&gt;<span id="method">dbh</span>-&gt;<span id="method">quote</span><span id="braces">(</span><span id="var">$ID</span><span id="braces">)</span>;
	    <span id="perlKey">foreach</span> <span id="perlKey">my</span> <span id="var">$table</span> <span id="braces">(</span><span id="perlFunc">qw</span>  <span id="braces">(</span>MATRIX_DATA
				    MATRIX_INFO
				    MATRIX_ANNOTATION
				    <span id="braces">)</span>
				<span id="braces">)</span>
	    <span id="braces">{</span>
		<span id="var">$self</span>-&gt;<span id="method">dbh</span>-&gt;<span id="perlKey">do</span><span id="braces">(</span><span id="dqStr">"DELETE from <span id="var">$table</span> where ID=<span id="var">$q_ID</span>"</span><span id="braces">)</span>;
	    <span id="braces">}</span>
	<span id="braces">}</span>
    <span id="braces">}</span>;
    <span id="perlKey">return</span> $@;
    
<span id="braces">}</span>



<span id="comment">#########################################################################</span><br /><span id="comment"># PRIVATE METHODS</span><br /><span id="comment">#########################################################################</span><br /></pre>}</td></div>
<div id="sep"></div>
<table id="methCodeTitle" width="100%"><tr><td width="200"><a name="CODE13" id="CODE13"></a>get_MatrixSet</td><td ><a href="#POD4">description</a></td><td ><a href="#CODE12">prev</a></td><td ><a href="#CODE14">next</a></td><td align="right"><a href="#TOP">Top</a></td></tr></table>
<div id="methCodeArea"><td ><span id="sub">sub</span> <span id="subName">get_MatrixSet</span>
{<pre>    <span id="perlKey">my</span> <span id="braces">(</span><span id="var">$self</span>, <span id="var">%args</span><span id="braces">)</span> = <span id="var">@_</span>;
    
    
    
    <span id="perlKey">my</span> <span id="var">@IDlist</span> = <span id="var">$self</span>-&gt;<span id="method">_get_IDlist_by_query</span><span id="braces">(</span><span id="var">%args</span><span id="braces">)</span>;
    <span id="perlKey">my</span> <span id="var">$type</span>;
    <span id="perlKey">my</span> <span id="var">$matrixset</span> = <span id="module"><a href="../MatrixSet.html">TFBS::MatrixSet</a></span>-&gt;<span id="perlKey">new</span><span id="braces">(</span><span id="braces">)</span>;
    
    <span id="perlKey">foreach</span> <span id="braces">(</span><span id="var">@IDlist</span><span id="braces">)</span>  <span id="braces">{</span>
       <span id="comment"># print &quot;$_\n&quot;;</span><br />    <span id="braces">}</span>
    
    <span id="perlKey">foreach</span> <span id="braces">(</span><span id="var">@IDlist</span><span id="braces">)</span>  <span id="braces">{</span>
	<span id="comment">#next if (defined $args{'-min_ic'} </span><br />	<span id="comment">#	 and $_-&gt;_get_total_ic($_) &lt; $args{'-min_ic'});</span><br />            <span id="comment">#evaluate total information content: ivolves actually retrieving matrix</span><br />            <span id="comment"># is actually a problem if matrix is stored PWM: thro an error if so</span><br />	
	<span id="perlKey">my</span> <span id="var">$matrix</span>=<span id="var">$self</span>-&gt;<span id="method">get_Matrix_by_ID</span><span id="braces">(</span><span id="var">$_</span><span id="braces">)</span>;
	<span id="comment">#evaluate</span><br />	<span id="comment">#ugly code:</span><br />	<span id="perlKey">if</span> <span id="braces">(</span><span id="perlFunc">defined</span> <span id="var">$args</span><span id="braces">{</span><span id="sqStr">'-min_ic'</span><span id="braces">}</span> <span id="braces">)</span><span id="braces">{</span>
            <span id="perlKey">if</span> <span id="braces">(</span><span id="var">$matrix</span>-&gt;<span id="method">isa</span><span id="braces">(</span><span id="dqStr">"TFBS::Matrix::PFM"</span><span id="braces">)</span><span id="braces">)</span><span id="braces">{</span>
                <span id="perlKey">next</span> <span id="perlKey">if</span> <span id="braces">(</span> <span id="var">$matrix</span>-&gt;<span id="method">to_ICM</span>-&gt;<span id="method">total_ic</span><span id="braces">(</span><span id="braces">)</span> &lt; <span id="var">$args</span><span id="braces">{</span><span id="sqStr">'-min_ic'</span><span id="braces">}</span><span id="braces">)</span>;     
            <span id="braces">}</span>
            <span id="perlKey">if</span> <span id="braces">(</span><span id="var">$matrix</span>-&gt;<span id="method">isa</span><span id="braces">(</span><span id="dqStr">"TFBS::Matrix::ICM"</span><span id="braces">)</span><span id="braces">)</span><span id="braces">{</span>
                <span id="perlKey">next</span> <span id="perlKey">if</span> <span id="braces">(</span><span id="var">$matrix</span>-&gt;<span id="method">total_ic</span><span id="braces">(</span><span id="braces">)</span> &lt; <span id="var">$args</span><span id="braces">{</span><span id="sqStr">'-min_ic'</span><span id="braces">}</span><span id="braces">)</span>;     
            <span id="braces">}</span>
            <span id="perlKey">if</span> <span id="braces">(</span><span id="var">$matrix</span>-&gt;<span id="method">isa</span><span id="braces">(</span><span id="dqStr">"TFBS::Matrix::PWM"</span><span id="braces">)</span><span id="braces">)</span><span id="braces">{</span>
                <span id="var">$self</span>-&gt;<span id="method">throw</span><span id="braces">(</span><span id="dqStr">"Cannot evaluate information constent from PWM matrices"</span><span id="braces">)</span>;
            <span id="braces">}</span>
	
	
        
        
	<span id="braces">}</span>
	<span id="comment">#ugly code:</span><br />
        <span id="perlKey">if</span> <span id="braces">(</span><span id="var">$args</span><span id="braces">{</span><span id="sqStr">'-matrixtype'</span><span id="braces">}</span> &amp;&amp; <span id="var">$matrix</span>-&gt;<span id="method">isa</span><span id="braces">(</span><span id="dqStr">"TFBS::Matrix::PFM"</span><span id="braces">)</span><span id="braces">)</span><span id="braces">{</span>
            <span id="perlKey">if</span> <span id="braces">(</span>      <span id="var">$args</span><span id="braces">{</span><span id="sqStr">'-matrixtype'</span><span id="braces">}</span> <span id="perlKey">eq</span> <span id="braces">(</span><span id="sqStr">'PWM'</span><span id="braces">)</span><span id="braces">)</span> <span id="braces">{</span>
               <span id="comment"># warn &quot;change&quot;;</span><br />                <span id="var">$matrix</span>= <span id="var">$matrix</span>-&gt;<span id="method">to_PWM</span><span id="braces">(</span><span id="braces">)</span>;
        <span id="braces">}</span>
	<span id="perlKey">if</span> <span id="braces">(</span>      <span id="var">$args</span><span id="braces">{</span><span id="sqStr">'-matrixtype'</span><span id="braces">}</span> <span id="perlKey">eq</span> <span id="braces">(</span><span id="sqStr">'ICM'</span><span id="braces">)</span><span id="braces">)</span> <span id="braces">{</span>
                <span id="comment">#warn &quot;change&quot;;</span><br />                <span id="var">$matrix</span>= <span id="var">$matrix</span>-&gt;<span id="method">to_PWM</span><span id="braces">(</span><span id="braces">)</span>;
        <span id="braces">}</span>
    <span id="braces">}</span>
	
	
        <span id="var">$matrixset</span>-&gt;<span id="method">add_Matrix</span><span id="braces">(</span><span id="var">$matrix</span><span id="braces">)</span>;
    <span id="braces">}</span>
    <span id="perlKey">return</span> <span id="var">$matrixset</span>;</pre>}</td></div>
<div id="sep"></div>
<table id="methCodeTitle" width="100%"><tr><td width="200"><a name="CODE14" id="CODE14"></a>get_Matrix_by_ID</td><td ><a href="#POD5">description</a></td><td ><a href="#CODE13">prev</a></td><td ><a href="#CODE15">next</a></td><td align="right"><a href="#TOP">Top</a></td></tr></table>
<div id="methCodeArea"><td ><span id="sub">sub</span> <span id="subName">get_Matrix_by_ID</span>
{<pre>
    <span id="perlKey">my</span> <span id="braces">(</span><span id="var">$self</span>, <span id="var">$ID</span>, <span id="var">$mt</span><span id="braces">)</span> = <span id="var">@_</span>;
    <span id="var">$mt</span> = <span id="braces">(</span><span id="perlFunc">uc</span><span id="braces">(</span><span id="var">$mt</span><span id="braces">)</span> or <span id="dqStr">"PWM"</span><span id="braces">)</span>;

    <span id="perlKey">unless</span> <span id="braces">(</span><span id="perlFunc">defined</span> <span id="var">$ID</span><span id="braces">)</span> <span id="braces">{</span>
	<span id="var">$self</span>-&gt;<span id="method">throw</span><span id="braces">(</span><span id="dqStr">"No ID passed to get_Matrix_by_ID"</span><span id="braces">)</span>;
    <span id="braces">}</span>
    <span id="perlKey">my</span> <span id="var">$matrixobj</span>;
    <span id="braces">{</span>
	<span id="perlFunc">no</span> strict <span id="sqStr">'refs'</span>;
	<span id="perlKey">my</span> <span id="var">$ucmt</span> = <span id="perlFunc">uc</span> <span id="var">$mt</span>;
	<span id="perlKey">my</span> <span id="var">$matrixstring</span> = <span id="var">$self</span>-&gt;<span id="method">_get_matrixstring</span><span id="braces">(</span><span id="var">$ID</span><span id="braces">)</span> || <span id="perlKey">return</span> <span id="perlFunc">undef</span>;
        <span id="comment"># get type of matrix</span><br />        <span id="perlKey">my</span> <span id="var">$sth</span>=<span id="var">$self</span>-&gt;<span id="method">dbh</span>-&gt;<span id="method">prepare</span><span id="braces">(</span><span id="perlFunc">qq</span><span id="dqStr">{SELECT type FROM MATRIX_INFO WHERE ID = '$ID'}</span><span id="braces">)</span>;
        <span id="var">$sth</span>-&gt;<span id="method">execute</span><span id="braces">(</span><span id="braces">)</span>;
        <span id="perlKey">my</span> <span id="var">$type</span>=<span id="var">$sth</span>-&gt;<span id="method">fetchrow_array</span><span id="braces">(</span><span id="braces">)</span>; 
	
	
	<span id="comment"># get reast of annotation as tags</span><br />        <span id="var">$sth</span>=<span id="var">$self</span>-&gt;<span id="method">dbh</span>-&gt;<span id="method">prepare</span><span id="braces">(</span><span id="perlFunc">qq</span><span id="dqStr">{SELECT tag, val FROM MATRIX_ANNOTATION WHERE ID = '$ID' }</span><span id="braces">)</span>;
        <span id="var">$sth</span>-&gt;<span id="method">execute</span><span id="braces">(</span><span id="braces">)</span>;
        <span id="perlKey">my</span> <span id="var">%tags</span>;
        <span id="perlKey">while</span> <span id="braces">(</span> <span id="perlKey">my</span><span id="braces">(</span><span id="var">$tag</span>, <span id="var">$val</span><span id="braces">)</span>= <span id="var">$sth</span>-&gt;<span id="method">fetchrow_array</span><span id="braces">(</span><span id="braces">)</span><span id="braces">)</span><span id="braces">{</span>
            <span id="var">$tags</span><span id="braces">{</span><span id="var">$tag</span><span id="braces">}</span>=<span id="var">$val</span>;
        <span id="braces">}</span>
	<span id="perlKey">my</span> <span id="var">$name</span>= <span id="var">$tags</span><span id="braces">{</span><span id="sqStr">'name'</span><span id="braces">}</span>;
        <span id="perlKey">my</span> <span id="var">$class</span>= <span id="var">$tags</span><span id="braces">{</span><span id="sqStr">'class'</span><span id="braces">}</span>;                    
	<span id="perlFunc">delete</span>   <span id="braces">(</span><span id="var">$tags</span><span id="braces">{</span><span id="sqStr">'name'</span><span id="braces">}</span><span id="braces">)</span>;
	<span id="perlFunc">delete</span> <span id="braces">(</span><span id="var">$tags</span><span id="braces">{</span><span id="sqStr">'class'</span><span id="braces">}</span><span id="braces">)</span>;
	
    	<span id="perlKey">eval</span> <span id="braces">(</span><span id="dqStr">"\<span id="var">$matrixobj</span>= TFBS::Matrix::<span id="var">$type</span>-&gt;new"</span>.<span id="sqStr">' <br />	    ( -ID    =&gt; $ID.&quot;&quot;,<br />            -name =&gt;$name, <br />	    -class =&gt; $class,<br />              -tags  =&gt;\% tags,<br />	     -matrixstring=&gt; $matrixstring   # FIXME - temporary<br />            );'</span><span id="braces">)</span>;
	<span id="comment">#if ($@) {$self-&gt;throw($@); }</span><br />	
    
    <span id="comment">#print &quot;ref:&quot;,ref ($matrixobj);</span><br />


    <span id="braces">}</span>

   <span id="comment"># print $matrixobj-&gt;ID();</span><br />  <span id="comment">#  print &quot;here\n&quot;;print $matrixobj-&gt;prettyprint();</span><br />    <span id="perlKey">return</span> <span id="braces">(</span><span id="var">$matrixobj</span><span id="braces">)</span>;</pre>}</td></div>
<div id="sep"></div>
<table id="methCodeTitle" width="100%"><tr><td width="200"><a name="CODE15" id="CODE15"></a>get_Matrix_by_name</td><td ><a href="#POD6">description</a></td><td ><a href="#CODE14">prev</a></td><td ><a href="#CODE16">next</a></td><td align="right"><a href="#TOP">Top</a></td></tr></table>
<div id="methCodeArea"><td ><span id="sub">sub</span> <span id="subName">get_Matrix_by_name</span>
{<pre>    <span id="perlKey">my</span> <span id="braces">(</span><span id="var">$self</span>, <span id="var">$name</span>, <span id="var">$mt</span><span id="braces">)</span> = <span id="var">@_</span>;
    <span id="perlKey">unless</span><span id="braces">(</span><span id="perlFunc">defined</span> <span id="var">$name</span><span id="braces">)</span> <span id="braces">{</span> 
	<span id="var">$self</span>-&gt;<span id="method">throw</span><span id="braces">(</span><span id="dqStr">"No name passed to get_Matrix_by_name."</span><span id="braces">)</span>; <span id="braces">}</span>

    <span id="perlKey">my</span> <span id="var">@IDlist</span> = <span id="var">$self</span>-&gt;<span id="method">_get_IDlist_by_query</span><span id="braces">(</span>-name=&gt;<span id="braces">[</span><span id="var">$name</span><span id="braces">]</span><span id="braces">)</span>;
    <span id="perlKey">my</span> <span id="var">$ID</span>= <span id="braces">(</span><span id="var">$IDlist</span><span id="braces">[</span>0<span id="braces">]</span> 
	    or <span id="var">$self</span>-&gt;<span id="perlFunc">warn</span><span id="braces">(</span><span id="dqStr">"No matrix with name <span id="var">$name</span> found."</span><span id="braces">)</span><span id="braces">)</span>;
    <span id="perlKey">if</span> <span id="braces">(</span><span id="braces">(</span><span id="perlKey">my</span> <span id="var">$L</span>= <span id="perlFunc">scalar</span> <span id="var">@IDlist</span><span id="braces">)</span> &gt; 1<span id="braces">)</span>  <span id="braces">{</span>
	<span id="var">$self</span>-&gt;<span id="perlFunc">warn</span><span id="braces">(</span><span id="dqStr">"There are <span id="var">$L</span> matrices with name '$name'"</span><span id="braces">)</span>;
    <span id="braces">}</span>
    <span id="perlKey">return</span> <span id="var">$self</span>-&gt;<span id="method">get_Matrix_by_ID</span><span id="braces">(</span><span id="var">$ID</span><span id="braces">)</span>;</pre>}</td></div>
<div id="sep"></div>
<table id="methCodeTitle" width="100%"><tr><td width="200"><a name="CODE16" id="CODE16"></a>new</td><td ><a href="#POD7">description</a></td><td ><a href="#CODE15">prev</a></td><td ><a href="#CODE17">next</a></td><td align="right"><a href="#TOP">Top</a></td></tr></table>
<div id="methCodeArea"><td ><span id="sub">sub</span> <span id="subName">new</span>
{<pre>  _new <span id="braces">(</span><span id="var">@_</span><span id="braces">)</span>;</pre>}</td></div>
<div id="sep"></div>
<table id="methCodeTitle" width="100%"><tr><td width="200"><a name="CODE17" id="CODE17"></a>store_Matrix</td><td ><a href="#POD8">description</a></td><td ><a href="#CODE16">prev</a></td><td ><a href="#CODE18">next</a></td><td align="right"><a href="#TOP">Top</a></td></tr></table>
<div id="methCodeArea"><td ><span id="sub">sub</span> <span id="subName">store_Matrix</span>
{<pre>    <span id="perlKey">my</span> <span id="braces">(</span><span id="var">$self</span>, <span id="var">@PFMs</span><span id="braces">)</span> = <span id="var">@_</span>;
    <span id="perlKey">my</span> <span id="var">$err</span>;
    <span id="perlKey">foreach</span> <span id="perlKey">my</span> <span id="var">$pfm</span> <span id="braces">(</span><span id="var">@PFMs</span><span id="braces">)</span>  <span id="braces">{</span>
	<span id="perlKey">eval</span> <span id="braces">{</span>
	    <span id="var">$self</span>-&gt;<span id="method">_store_matrix_data</span><span id="braces">(</span><span id="var">$pfm</span><span id="braces">)</span>;
	    <span id="var">$self</span>-&gt;<span id="method">_store_matrix_info</span><span id="braces">(</span><span id="var">$pfm</span><span id="braces">)</span>;
	    <span id="var">$self</span>-&gt;<span id="method">_store_matrix_annotation</span><span id="braces">(</span><span id="var">$pfm</span><span id="braces">)</span>;
	    <span id="comment">#$self-&gt;_store_matrix_species($pfm);</span><br />	<span id="braces">}</span>;
    <span id="braces">}</span>
    <span id="perlKey">return</span> $@;</pre>}</td></div>
<div id="sep"></div>
<table id="methCodeTitle" width="100%"><tr><td width="200"><a name="CODE18" id="CODE18"></a>store_MatrixSet</td><td >description</td><td ><a href="#CODE17">prev</a></td><td >next</td><td align="right"><a href="#TOP">Top</a></td></tr></table>
<div id="methCodeArea"><td ><span id="sub">sub</span> <span id="subName">store_MatrixSet</span>
{<pre>    <span id="var">$_</span><span id="braces">[</span>0<span id="braces">]</span>-&gt;<span id="method">throw</span> <span id="braces">(</span><span id="dqStr">"Method store_MtrixSet not yet implemented."</span><span id="braces">)</span>;</pre>}</td></div>
<div id="sep"></div>
<a name="General" id="General"></a>
<div id="mainTitle">General documentation</div>
<div id="sep"></div>
<table id="genInfoTitle" width="100%"><tr><td><a name="_pod_JASPAR2 DATA MODEL" id="_pod_JASPAR2 DATA MODEL"></a>JASPAR2 DATA MODEL</td><td align="right"><a href="#TOP">Top</a></td></tr></table>
<div id="genInfoArea">JASPAR4 is working name for a relational database model used<br />for storing transcriptional factor pattern matrices in a MySQL database.<br />It was initially designed (JASPAR2) to store matrices for the JASPAR database of<br />high quality eukaryotic transcription factor specificity profiles by<br />Albin Sandelin and Wyeth W. Wasserman. Besides the profile matrix itself,<br />this data model stores profile ID (unique), name, structural class,<br />basic taxonomic and bibliographic information<br />as well as some additional opseqdbtional tags.<br />Tags that are commonly used in the actual JASPAR database include<br />    'medline'  # PubMed ID<br />    'species'  # Species name<br />    'superclass' #Species supergroup, eg 'vertebrate', 'plant' etc<br />    'total_ic' # total information content - redundant, present <br />               # for historical<br />    'type'    #experimental nethod<br />    'acc'    #accession number for TF protein sequence<br />    'seqdb'    #corresponding database name<br />    <br />but any tag is storable and searchable.<br />    <br />    <br />-----------------------  ADVANCED  ---------------------------------<br />For the developers and the curious, here is the JASPAR4 data model:<br /><pre id="podParagraph">  <br /></pre>It is our best intention to hide the details of this data model, which we <br />are using on a daily basis in our work, from most TFBS users.<br />Most users should only know the methods to store the data and <br />which tags are supported.<br />-------------------------------------------------------------------------</div>
<div id="sep"></div>
<table id="genInfoTitle" width="100%"><tr><td><a name="_pod_FEEDBACK" id="_pod_FEEDBACK"></a>FEEDBACK</td><td align="right"><a href="#TOP">Top</a></td></tr></table>
<div id="genInfoArea">Please send bug reports and other comments to the author.</div>
<div id="sep"></div>
<table id="genInfoTitle" width="100%"><tr><td><a name="_pod_AUTHOR - Boris Lenhard" id="_pod_AUTHOR - Boris Lenhard"></a>AUTHOR - Boris Lenhard</td><td align="right"><a href="#TOP">Top</a></td></tr></table>
<div id="genInfoArea">Boris Lenhard &lt;Boris.Lenhard@cgb.ki.se&gt;</div>
<div id="sep"></div>
<table id="genInfoTitle" width="100%"><tr><td><a name="_pod_APPENDIX" id="_pod_APPENDIX"></a>APPENDIX</td><td align="right"><a href="#TOP">Top</a></td></tr></table>
<div id="genInfoArea">The rest of the documentation details each of the object<br />methods. Internal methods are preceded with an underscore.</div>
<div id="sep"></div>
</body>
</html>
